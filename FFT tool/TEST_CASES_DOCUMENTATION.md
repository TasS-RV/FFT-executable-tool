# FFT Test Cases Documentation

This document describes the test cases generated by `generate_test_data.py` for validating the FFT analysis tool and filter pipeline.

## Test Data Specifications

- **Sample Rate**: 1000 Hz
- **Duration**: 10 seconds
- **Total Points**: 10,000
- **File Format**: CSV (columns: `time`, `signal`)

---

## Test Case 01: Clean Dual Frequency

**File**: `test_01_clean_dual_freq.csv`

### Description
Clean signal with two sine waves at known frequencies. No noise contamination. This is the baseline test case for validating basic FFT frequency detection accuracy.

### Signal Characteristics
- **Frequencies**: 10.0 Hz, 50.0 Hz
- **Amplitudes**: 1.0, 0.5
- **Noise**: None
- **Sampling**: Uniform

### Expected FFT Peaks
- 10 Hz (amplitude ~1.0)
- 50 Hz (amplitude ~0.5)

### Recommended Filter Settings
- **Median filter**: Optional (no spikes present)
- **High-pass**: Optional (no DC drift)
- **Low-pass**: Optional (no high-frequency noise)
- **Notch**: Not needed
- **Bandpass**: Optional (10-60 Hz to isolate signal)

### Filter Results
<!-- Add images and notes here after testing -->

---

## Test Case 02: Multiple Frequencies with White Noise

**File**: `test_02_multi_freq_white_noise.csv`

### Description
Signal with four distinct sine waves plus moderate white noise. Tests the FFT's ability to detect multiple frequencies in noisy data.

### Signal Characteristics
- **Frequencies**: 5.0 Hz, 25.0 Hz, 100.0 Hz, 150.0 Hz
- **Amplitudes**: 2.0, 1.0, 0.8, 0.6
- **Noise**: White noise (amplitude: 0.2)
- **Sampling**: Uniform

### Expected FFT Peaks
- 5 Hz (amplitude ~2.0)
- 25 Hz (amplitude ~1.0)
- 100 Hz (amplitude ~0.8)
- 150 Hz (amplitude ~0.6)

### Recommended Filter Settings
- **Median filter**: Optional
- **High-pass**: 0.1-1 Hz (remove DC)
- **Low-pass**: 200 Hz (remove high-frequency noise above signal)
- **Notch**: Not needed
- **Bandpass**: 1-200 Hz (isolate signal band)

### Filter Results
<!-- Add images and notes here after testing -->

---

## Test Case 03: High-Frequency Noise Contamination

**File**: `test_03_high_freq_noise.csv`

### Description
Signal with 20 Hz and 60 Hz components plus strong high-frequency noise. Tests low-pass filter effectiveness for removing high-frequency contamination.

### Signal Characteristics
- **Frequencies**: 20.0 Hz, 60.0 Hz
- **Amplitudes**: 1.5, 1.0
- **Noise**: 
  - White noise: 0.1
  - High-frequency noise: 0.5 (strong)
- **Sampling**: Uniform

### Expected FFT Peaks
- 20 Hz (amplitude ~1.5)
- 60 Hz (amplitude ~1.0)
- Broad high-frequency noise floor

### Recommended Filter Settings
- **Median filter**: Optional
- **High-pass**: 0.1-1 Hz (remove DC)
- **Low-pass**: 80-100 Hz (critical - remove high-frequency noise)
- **Notch**: Not needed
- **Bandpass**: 10-80 Hz (isolate signal, remove high-freq noise)

### Filter Results
<!-- Add images and notes here after testing -->

---

## Test Case 04: Low-Frequency Drift/Noise

**File**: `test_04_low_freq_drift.csv`

### Description
Signal with 30 Hz and 80 Hz components plus low-frequency drift. Tests high-pass filter effectiveness for removing DC offset and slow drift.

### Signal Characteristics
- **Frequencies**: 30.0 Hz, 80.0 Hz
- **Amplitudes**: 1.0, 0.7
- **Noise**: 
  - White noise: 0.15
  - Low-frequency drift: 0.3 (strong)
- **Sampling**: Uniform

### Expected FFT Peaks
- 30 Hz (amplitude ~1.0)
- 80 Hz (amplitude ~0.7)
- Large DC/low-frequency component

### Recommended Filter Settings
- **Median filter**: Optional
- **High-pass**: 1-5 Hz (critical - remove drift and DC)
- **Low-pass**: 100 Hz (remove high-frequency noise)
- **Notch**: Not needed
- **Bandpass**: 10-100 Hz (isolate signal, remove drift)

### Filter Results
<!-- Add images and notes here after testing -->

---

## Test Case 05: Mains Frequency (50 Hz) Interference

**File**: `test_05_mains_interference.csv`

### Description
Signal with desired frequencies (15 Hz, 75 Hz) plus strong 50 Hz mains interference. Tests notch filter effectiveness at removing specific interference frequencies.

### Signal Characteristics
- **Frequencies**: 15.0 Hz, 50.0 Hz, 75.0 Hz
- **Amplitudes**: 1.0, 2.0, 0.8 (50 Hz is interference)
- **Noise**: White noise: 0.2
- **Sampling**: Uniform

### Expected FFT Peaks
- 15 Hz (amplitude ~1.0) - desired
- 50 Hz (amplitude ~2.0) - interference (should be removed)
- 75 Hz (amplitude ~0.8) - desired

### Recommended Filter Settings
- **Median filter**: Optional
- **High-pass**: 0.1-1 Hz
- **Low-pass**: 100 Hz
- **Notch**: 50 Hz (critical - remove mains interference)
- **Bandpass**: 10-100 Hz (alternative approach)

### Filter Results
<!-- Add images and notes here after testing -->

---

## Test Case 06: Multiple Notch Frequencies

**File**: `test_06_multiple_notch_freqs.csv`

### Description
Signal with desired frequencies (25 Hz, 125 Hz) plus interference at 50 Hz and 100 Hz. Tests multiple notch filters simultaneously.

### Signal Characteristics
- **Frequencies**: 25.0 Hz, 50.0 Hz, 100.0 Hz, 125.0 Hz
- **Amplitudes**: 1.5, 1.8, 1.6, 1.2 (50 & 100 Hz are interference)
- **Noise**: White noise: 0.15
- **Sampling**: Uniform

### Expected FFT Peaks
- 25 Hz (amplitude ~1.5) - desired
- 50 Hz (amplitude ~1.8) - interference (should be removed)
- 100 Hz (amplitude ~1.6) - interference (should be removed)
- 125 Hz (amplitude ~1.2) - desired

### Recommended Filter Settings
- **Median filter**: Optional
- **High-pass**: 0.1-1 Hz
- **Low-pass**: 150 Hz
- **Notch**: 50 Hz, 100 Hz (critical - remove both interference frequencies)
- **Bandpass**: 20-150 Hz (alternative approach)

### Filter Results
<!-- Add images and notes here after testing -->

---

## Test Case 07: Non-Uniform Sampling

**File**: `test_07_nonuniform_sampling.csv`

### Description
Signal with non-uniform time spacing (10% jitter). Tests interpolation accuracy and FFT behavior with irregular sampling.

### Signal Characteristics
- **Frequencies**: 12.0 Hz, 45.0 Hz
- **Amplitudes**: 1.0, 0.6
- **Noise**: White noise: 0.1
- **Sampling**: Non-uniform (10% jitter)

### Expected FFT Peaks
- 12 Hz (amplitude ~1.0)
- 45 Hz (amplitude ~0.6)

### Recommended Filter Settings
- **Median filter**: Optional
- **High-pass**: 0.1-1 Hz
- **Low-pass**: 60 Hz
- **Notch**: Not needed
- **Bandpass**: 5-60 Hz

### Notes
This test case validates that the interpolation step correctly handles non-uniform sampling before FFT analysis.

### Filter Results
<!-- Add images and notes here after testing -->

---

## Test Case 08: Very Noisy Signal (Low SNR)

**File**: `test_08_low_snr.csv`

### Description
Weak signals buried in strong noise. Tests filter pipeline effectiveness for low signal-to-noise ratio scenarios.

### Signal Characteristics
- **Frequencies**: 35.0 Hz, 90.0 Hz
- **Amplitudes**: 0.5, 0.4 (weak signals)
- **Noise**: 
  - White noise: 1.0 (strong - SNR ~ 0.5)
  - High-frequency noise: 0.3
  - Low-frequency noise: 0.2
- **Sampling**: Uniform

### Expected FFT Peaks
- 35 Hz (amplitude ~0.5) - may be difficult to detect
- 90 Hz (amplitude ~0.4) - may be difficult to detect
- High noise floor

### Recommended Filter Settings
- **Median filter**: Recommended (k=5-7)
- **High-pass**: 1-5 Hz (remove drift)
- **Low-pass**: 120 Hz (remove high-freq noise)
- **Notch**: Not needed
- **Bandpass**: 20-120 Hz (isolate signal band, reduce noise)

### Filter Results
<!-- Add images and notes here after testing -->

---

## Test Case 09: Close Frequency Pairs

**File**: `test_09_close_frequencies.csv`

### Description
Signal with closely spaced frequencies. Tests FFT frequency resolution and ability to distinguish nearby peaks.

### Signal Characteristics
- **Frequencies**: 40.0 Hz, 40.5 Hz, 95.0 Hz, 96.0 Hz
- **Amplitudes**: 1.0, 0.9, 0.8, 0.7
- **Noise**: White noise: 0.1
- **Sampling**: Uniform

### Expected FFT Peaks
- 40.0 Hz (amplitude ~1.0)
- 40.5 Hz (amplitude ~0.9) - close to 40 Hz
- 95.0 Hz (amplitude ~0.8)
- 96.0 Hz (amplitude ~0.7) - close to 95 Hz

### Recommended Filter Settings
- **Median filter**: Optional
- **High-pass**: 0.1-1 Hz
- **Low-pass**: 100 Hz
- **Notch**: Not needed
- **Bandpass**: 35-100 Hz

### Notes
This test validates frequency resolution. With 10 seconds of data, frequency resolution is ~0.1 Hz, so 40.0/40.5 Hz and 95.0/96.0 Hz should be distinguishable.

### Filter Results
<!-- Add images and notes here after testing -->

---

## Test Case 10: Wide Frequency Range

**File**: `test_10_wide_freq_range.csv`

### Description
Signal with frequencies spanning a wide range (2-200 Hz). Tests FFT performance across wide frequency range and filter bandwidth selection.

### Signal Characteristics
- **Frequencies**: 2.0 Hz, 20.0 Hz, 100.0 Hz, 200.0 Hz
- **Amplitudes**: 1.2, 1.0, 0.9, 0.7
- **Noise**: White noise: 0.15
- **Sampling**: Uniform

### Expected FFT Peaks
- 2 Hz (amplitude ~1.2)
- 20 Hz (amplitude ~1.0)
- 100 Hz (amplitude ~0.9)
- 200 Hz (amplitude ~0.7)

### Recommended Filter Settings
- **Median filter**: Optional
- **High-pass**: 0.5-1 Hz (remove DC, keep 2 Hz)
- **Low-pass**: 250 Hz (keep all frequencies)
- **Notch**: Not needed
- **Bandpass**: 1-250 Hz (wide bandpass)

### Filter Results
<!-- Add images and notes here after testing -->

---

## Test Case 11: Spike Contamination

**File**: `test_11_spikes.csv`

### Description
Signal with 30 Hz and 70 Hz components plus random large spikes. Tests median filter effectiveness for removing outliers and spikes.

### Signal Characteristics
- **Frequencies**: 30.0 Hz, 70.0 Hz
- **Amplitudes**: 1.0, 0.8
- **Noise**: White noise: 0.1
- **Spikes**: 50 random spikes with amplitude ±5.0
- **Sampling**: Uniform

### Expected FFT Peaks
- 30 Hz (amplitude ~1.0)
- 70 Hz (amplitude ~0.8)
- Broad spectrum from spikes

### Recommended Filter Settings
- **Median filter**: Critical (k=5-7 recommended)
- **High-pass**: 0.1-1 Hz
- **Low-pass**: 100 Hz
- **Notch**: Not needed
- **Bandpass**: 10-100 Hz

### Filter Results
<!-- Add images and notes here after testing -->

---

## Test Case 12: All Noise Types Combined

**File**: `test_12_all_noise_types.csv`

### Description
Comprehensive test with multiple frequencies plus all types of noise contamination. Tests the complete filter pipeline working together.

### Signal Characteristics
- **Frequencies**: 18.0 Hz, 55.0 Hz, 120.0 Hz
- **Amplitudes**: 1.5, 1.2, 1.0
- **Noise**: 
  - White noise: 0.3
  - High-frequency noise: 0.4
  - Low-frequency drift: 0.3
- **Spikes**: 30 random spikes with amplitude ±3.0
- **Sampling**: Uniform

### Expected FFT Peaks
- 18 Hz (amplitude ~1.5)
- 55 Hz (amplitude ~1.2)
- 120 Hz (amplitude ~1.0)
- High noise floor from all sources

### Recommended Filter Settings
- **Median filter**: Critical (k=5-7) - remove spikes
- **High-pass**: 1-5 Hz - remove drift
- **Low-pass**: 150 Hz - remove high-freq noise
- **Notch**: Optional (if specific interference present)
- **Bandpass**: 10-150 Hz - isolate signal band

### Filter Results
<!-- Add images and notes here after testing -->

---

## Filter Pipeline Order

The filters are applied in the following fixed order:

1. **Median filter** - Removes spikes and outliers
2. **High-pass filter** - Removes DC offset and low-frequency drift
3. **Notch filter** - Removes specific interference frequencies
4. **Low-pass filter** - Removes high-frequency noise
5. **Bandpass filter** - Passes only a specific frequency band
6. **Savitzky-Golay** - Smoothing (optional)

Each filter can be independently enabled/disabled. The pipeline order is fixed, but filters operate on the cumulative result of all previous enabled filters.

---

## Notes

- All test cases use a sample rate of 1000 Hz and duration of 10 seconds
- Frequency resolution: ~0.1 Hz (1/duration)
- Maximum detectable frequency: ~500 Hz (Nyquist = sample_rate/2)
- Test cases can be regenerated by running `generate_test_data.py`
- Existing files are not overwritten to preserve test results

---

## Adding Results

To add filter results for each test case:
1. Load the test CSV file in the FFT tool
2. Apply recommended filter settings
3. Take screenshots of:
   - Raw signal plot
   - FFT spectrum (before filtering)
   - FFT spectrum (after filtering)
4. Paste images in the "Filter Results" section for each test case
5. Add notes about filter effectiveness and any observations

